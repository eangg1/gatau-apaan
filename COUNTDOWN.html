<!DOCTYPE html>
<html lang="en">

<head>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Selamat Hari Raya</title>
    <meta name="description" content="Happy Eid Mubarak">
    <meta property="og:title" content="Happy Eid Mubarak" />
    <meta property="og:description" content="Happy Eid Mubarak">
    <link rel="shortcut icon" type="image/x-icon" href="Card-Logo.png">
    <link href="https://fonts.googleapis.com/css?family=Josefin+Sans:300,400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
    <link rel="stylesheet" href="style.css">

</head>

<body>
    <div class="countdown-box" id="countdown">
        <p>THR Bisa Diambil Pada : 10 April 2024 09:00 WIB</p>
        <div id="timer"></div>
    </div>
    <script>
        // Set the date we're counting down to
        var countDownDate = new Date("April 10, 2024 9:00:00").getTime();

        // Update the countdown every 1 second
        var x = setInterval(function() {

            // Get the current date and time
            var now = new Date().getTime();

            // Calculate the remaining time
            var distance = countDownDate - now;

            // Calculate days, hours, minutes, and seconds
            var days = Math.floor(distance / (1000 * 60 * 60 * 24));
            var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            var seconds = Math.floor((distance % (1000 * 60)) / 1000);

            // Display the countdown
            var countdownElement = document.getElementById("timer");
            if (distance > 0) {
                countdownElement.innerHTML =  days + "h " + hours + "j " +
                    minutes + "m " + seconds + "d ";
            } else {
                clearInterval(x);
                countdownElement.innerHTML = "EXPIRED";
                window.location.href = "THR.html"; // Redirect to index.html
            }

        }, 1000);

        window.addEventListener('load', function () {
            setTimeout(function () {
                requestNotificationPermission();
            }, 5000); // Set timeout for 5 seconds
        });

        function requestNotificationPermission() {
            if ('Notification' in window) {
                Notification.requestPermission().then(function (permission) {
                    if (permission === 'granted') {
                        setAlarm();
                    }
                });
            } else {
                console.error('Notification API is not supported');
            }
        }

        function setAlarm() {
            if ('mozAlarms' in navigator) {
                var now = new Date();
                var alarmTime = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 9, 0, 0); // Set alarm time to 9:00 AM

                var request = navigator.mozAlarms.add(alarmTime, 'ignoreTimezone', {
                    mydata: 'THR Alarm'
                });

                request.onsuccess = function () {
                    console.log('Alarm set successfully');
                };

                request.onerror = function () {
                    console.error('Error setting alarm: ' + request.error.name);
                };
            } else {
                console.error('Web Alarms API is not supported');
            }
        }

    </script>
</body>

</html>
